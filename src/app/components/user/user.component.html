<div class="content boxshadow" dpfContent>
  <h2>Users <i class="fa icon-plus-1 new" (click)="showNew()">Add new</i></h2>
  <div class="dpfoverflowwrapper" dpfOverflowWrapper>
    <div class="spacer20"></div>
    <table>
      <tr>
        <td>
          <i class="fa icon-search"></i><input placeholder="User Email"(ngModelChange)="filter.userEmail=$event;filterChanges();" (click)="$event.stopPropagation()" [(ngModel)]="filter.userEmail" class=" filter" type="text"  name="userEmailFilter" >
        </td>
        <td>
            <i class="fa icon-search"></i><input placeholder="First Name" (ngModelChange)="filter.firstName=$event;filterChanges();" (click)="$event.stopPropagation()" [(ngModel)]="filter.firstName" class="filter" type="text"  name="firstNameFilter" >
        </td>
        <td>
            <i class="fa icon-search"></i><input placeholder="Last Name" (ngModelChange)="filter.lastName=$event;filterChanges();" (click)="$event.stopPropagation()" [(ngModel)]="filter.lastName" class="filter" type="text"  name="lastNameFilter" >
        </td>

      </tr>
    </table>
    <div class="hr"></div>
      <table mat-table matSort [dataSource]="dataSource" >

        <ng-container matColumnDef="userEmail">
            <th mat-sort-header mat-header-cell *matHeaderCellDef>
              Email
            </th>
          <td mat-cell *matCellDef="let part"> {{part.userEmail}} </td>
        </ng-container>

        <ng-container matColumnDef="firstName">
          <th mat-sort-header mat-header-cell *matHeaderCellDef>
              First Name
          </th>
          <td mat-cell *matCellDef="let part"> {{part.firstName}} </td>
        </ng-container>

        <ng-container matColumnDef="lastName">
          <th mat-sort-header mat-header-cell *matHeaderCellDef>
              Last Name
          </th>
          <td mat-cell *matCellDef="let part"> {{part.lastName}} </td>
        </ng-container>

        <ng-container matColumnDef="type">
          <th mat-sort-header mat-header-cell *matHeaderCellDef>
              Type
          </th>
          <td mat-cell *matCellDef="let part"> {{part.type}} </td>
        </ng-container>


        <ng-container matColumnDef="hidden">
          <th mat-sort-header mat-header-cell *matHeaderCellDef>
            Hidden
          </th>
          <td mat-cell *matCellDef="let part"> {{part.deleted}} </td>
        </ng-container>

        <ng-container matColumnDef="edit">
          <th mat-sort-header mat-header-cell *matHeaderCellDef>
              Edit
          </th>
          <td class="edit" (click)="setCurrentDataSet(part)" mat-cell *matCellDef="let part"> <i class="fa icon-edit edit"></i> </td>
        </ng-container>

        <ng-container matColumnDef="delete">
          <th mat-header-cell *matHeaderCellDef>
              Delete
          </th>
          <td class="edit" (click)="showDelete(part)" mat-cell *matCellDef="let part"> <i class="fa icon-trash-empty delete"></i> </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="columnsToDisplay; sticky: true"></tr>
        <tr mat-row *matRowDef="let part; columns: columnsToDisplay"></tr>
      </table>
    </div>
</div>
<div class="overlaybg" *ngIf="ui.showOverlay"></div>
<div class="overlay" *ngIf="currentDataSet">
  <div class="overlay-content">
    <span (click)="currentDataSet = null;ui.showOverlay = false" class="close">X</span>
    <h3 class="fa icon-edit">Display&nbsp;Part</h3>
    <p>{{currentDataSet.title}}</p>
    <hr />
    <div class="container-flex">
      <form name="displayPartForm" [formGroup]="userForm">
        <div class="spacer20"></div>
        <mat-form-field>
          <input type="text" formControlName="userEmail" matInput name="userEmail" #userEmail placeholder="Email*">
          <mat-error [hidden]="userEmail.valid || userEmail.pristine">required</mat-error>
        </mat-form-field>
        <mat-form-field>
          <input type="text" formControlName="firstName" matInput name="firstName" #firstName placeholder="First Name*">
          <mat-error [hidden]="title.valid || title.pristine">required</mat-error>
        </mat-form-field>
        <mat-form-field>
          <input type="text" formControlName="lastName" matInput name="lastName" #lastName placeholder="Last Name">
          <mat-error [hidden]="lastName.valid || lastName.pristine">required</mat-error>
        </mat-form-field>
        <mat-form-field>
          <input type="text" formControlName="type" matInput name="type" #type placeholder="Type">
          <mat-error [hidden]="type.valid || type.pristine">required</mat-error>
        </mat-form-field>
        <mat-checkbox formControlName="hidden" matInput name="hidden" #hidden placeholder="Visible"></mat-checkbox>&nbsp;Visible
        <hr />
        <div class="spacer20"></div>
        <button (click)="save()" mat-raised-button>Save</button>
        <div class="spacer20"></div>
        <div *ngIf="ui.saveSuccess">
          <div class="spacer20"></div>
          Save Success
        </div>
      </form>
    </div>
  </div>
</div>

<div class="overlay" *ngIf="dataSetToDelete">
  <div class="overlay-content">
    <span (click)="deleteClose()" class="close">X</span>
    <h3 class="fa icon-trash-empty">Display&nbsp;Part</h3>
    <p>{{dataSetToDelete.title}}</p>
    <hr />
    <div class="container-flex">
      <h2>This Display Part will be deleted permanently. Are you sure?</h2>
      <div class="spacer"></div>
      <div style="display:flex;justify-content:  space-between" *ngIf="!ui.deleteSuccess">
        <button class="delete-button" (click)="delete()" mat-raised-button>Delete</button>
        <button class="abort-button" (click)="dataSetToDelete = null;ui.showOverlay = false;" mat-raised-button>Abort</button>
      </div>
      <div *ngIf="ui.deleteSuccess">
        Delete Success
      </div>
    </div>
  </div>
</div>
